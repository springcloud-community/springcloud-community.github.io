<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Unified configuration management using Spring Cloud Config - Spring Cloud</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="description" content="Learn how to use Spring Cloud Config to unify configuration management." />
<meta name="keywords" content="Spring Cloud Config, Git" />







<meta name="generator" content="Hugo 0.96.0" />


<link rel="canonical" href="https://www.springcloud.io/post/2022-04/spring-cloud-config-usage/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css" integrity="sha256-&#43;ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="Unified configuration management using Spring Cloud Config" />
<meta property="og:description" content="Learn how to use Spring Cloud Config to unify configuration management." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.springcloud.io/post/2022-04/spring-cloud-config-usage/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-06T13:21:07+08:00" />
<meta property="article:modified_time" content="2022-04-06T13:21:07+08:00" />

<meta itemprop="name" content="Unified configuration management using Spring Cloud Config">
<meta itemprop="description" content="Learn how to use Spring Cloud Config to unify configuration management."><meta itemprop="datePublished" content="2022-04-06T13:21:07+08:00" />
<meta itemprop="dateModified" content="2022-04-06T13:21:07+08:00" />
<meta itemprop="wordCount" content="2030">
<meta itemprop="keywords" content="spring-cloud-config," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unified configuration management using Spring Cloud Config"/>
<meta name="twitter:description" content="Learn how to use Spring Cloud Config to unify configuration management."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->





<script async src="https://www.googletagmanager.com/gtag/js?id=G-N9WSHEG9H6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N9WSHEG9H6');
</script>



 
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761"
     crossorigin="anonymous"></script>

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Spring Cloud</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/post/">Archives</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/tags/">Tags</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/categories/">Categories</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/forum">Forum</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/about/">About</a>
          
        
      </li>
    

    
      <li class="mobile-menu-item">
        <a id="openSearchMobile" class="mobile-menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  
    
<div class="modal-dialog">
    
    <div class="modal-content">
      <div id="closeSearch" title="Close" class="close">X</div>
      <div class="modal-header">
        <div class="modal-title">Search</div>
      </div>
      <div class="modal-body">
          <script>
            (function() {
              var cx = 'b3ac69fdeaebb32a4';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = (document.location.protocol == 'https:' ? 'https:' :
                  'http:') +
                '//cse.google.com/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          <gcse:search></gcse:search>
      </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Spring Cloud
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/post/">Archives</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/tags/">Tags</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/categories/">Categories</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/forum">Forum</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://www.springcloud.io/about/">About</a>
          

        

      </li>
    

    
    

    
      <li class="menu-item">
        <a id="openSearch" class="menu-item-link menu-item-search" href="#">
          <i class="iconfont">
            <svg version="1.1" viewBox="0 0 1024 1024"
  xmlns="http://www.w3.org/2000/svg" width="18" height="18"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M973.81454219 973.81454219a91.78207815 91.78207815 0 0 1-129.80999631 0l-161.97482118-161.97482118a425.48527711 425.48527711 0 0 1-230.35931791 68.16531768 428.3346319 428.3346319 0 1 1 428.3346319-428.3346319 425.48527711 425.48527711 0 0 1-68.16531768 230.35931791l162.02961656 161.97482118a91.83687354 91.83687354 0 0 1-0.05479538 129.80999631zM451.67040679 145.69361559a305.97679241 305.97679241 0 1 0 0 611.95358361 305.97679241 305.97679241 0 0 0 0-611.95358361z">
  </path>
</svg>

          </i>
        </a>
      </li>
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Unified configuration management using Spring Cloud Config</h1>
      
      <div class="post-meta">
        <time datetime="2022-04-06" class="post-time">
          2022-04-06
        </time>
        <div class="post-category">
            <a href="https://www.springcloud.io/categories/tutorials/"> tutorials </a>
            
          </div>
        <span class="more-meta"> 2030 words </span>
          <span class="more-meta"> 5 min read </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1-preface">1 Preface</a></li>
    <li><a href="#2-quick-experience">2 Quick Experience</a>
      <ul>
        <li><a href="#21-the-server-side-is-a-springboot">2.1 The server side is a Springboot</a></li>
        <li><a href="#22-configuration-repositories">2.2 Configuration repositories</a></li>
        <li><a href="#23-configuration-path-matching">2.3 Configuration path matching</a></li>
        <li><a href="#24-remote-repositories">2.4 Remote repositories</a></li>
        <li><a href="#25-multiple-code-configuration-repositories">2.5 Multiple code configuration repositories</a></li>
      </ul>
    </li>
    <li><a href="#3-client-side-use-of-configuration">3 Client-side use of configuration</a>
      <ul>
        <li><a href="#31-project-preparation">3.1 Project preparation</a></li>
        <li><a href="#32-how-the-client-matches">3.2 How the client matches</a></li>
        <li><a href="#33-client-configuration-takes-effect-instantly">3.3 Client configuration takes effect instantly</a></li>
        <li><a href="#34-automatic-configuration-update">3.4 Automatic configuration update</a></li>
        <li><a href="#35-services-discovery">3.5 Services Discovery</a></li>
      </ul>
    </li>
    <li><a href="#4-summary">4 Summary</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <h2 id="1-preface">1 Preface</h2>
<p>Configurability is a feature that a mature software system should provide, and configuration management is important for large systems, especially for microservices systems with multiple applications. Happily, <code>Spring</code> provides us with good configuration management, such as the powerful configuration of <code>Springboot</code>. For <code>Spring Cloud</code>, there is the powerful <code>Spring Cloud Config</code> which is very useful for distributed system configuration management by providing a configuration management outside the application, such as a file or <code>Git</code> repository.</p>
<h2 id="2-quick-experience">2 Quick Experience</h2>
<p>The <code>Spring Cloud Config</code> server is a <code>Springboot</code> application that is very easy to start and deploy.</p>
<p>The overall architecture is shown in the following figure.</p>
<p><img src="https://cdn.jsdelivr.net/gh/springcloud-community/image-bucket/2022/04/06/bcd275a4c23b4880a83433066dc357af.png" alt="Spring Cloud Config"></p>
<h3 id="21-the-server-side-is-a-springboot">2.1 The server side is a Springboot</h3>
<p>Add a dependency to <code>Springboot</code> as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-cloud-config-server<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;version&gt;</span>2.2.0.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>That&rsquo;s all, it already contains <code>web</code> and <code>actuator</code>.</p>
<p>Add the <code>Java</code> main class.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.pkslow.config</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.cloud.config.server.EnableConfigServer</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="nd">@EnableConfigServer</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConfigServer</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">ConfigServer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Compared to a normal <code>Springboot</code> application it just has one more annotation <code>@EnableConfigServer</code>.</p>
<h3 id="22-configuration-repositories">2.2 Configuration repositories</h3>
<p>We will manage the configuration through version control, generally using the <code>Git</code> repository, but for simplicity we will use a local repository as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 创建目录</span>
</span></span><span class="line"><span class="cl">mkdir git-repo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 初始化一个git目录</span>
</span></span><span class="line"><span class="cl">git init
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 新建文件</span>
</span></span><span class="line"><span class="cl">touch application.properties
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 添加变更</span>
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 提交变更</span>
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;init&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Configure the project&rsquo;s <code>application.properties</code>, note that it&rsquo;s for the <code>Config Server</code> project and not in the <code>git-repo</code> directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server.port=8888
</span></span><span class="line"><span class="cl">spring.application.name=config-server
</span></span><span class="line"><span class="cl">spring.cloud.config.server.git.uri=/Users/pkslow/IdeaProjects/pkslow-modules/config-server/git-repo
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then you can start <code>Config Server</code>.</p>
<p>But there is nothing in the <code>git</code> repository for the config file, so we add the following and commit it (you have to commit it or it won&rsquo;t be available).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">pkslow.webSite=www.pkslow.com
</span></span><span class="line"><span class="cl">pkslow.age=18
</span></span><span class="line"><span class="cl">pkslow.email=admin@pkslow.com
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="23-configuration-path-matching">2.3 Configuration path matching</h3>
<p>So how do we get these configurations? It can be read from the following <code>URL</code>s.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">/<span class="o">{</span>application<span class="o">}</span>/<span class="o">{</span>profile<span class="o">}[</span>/<span class="o">{</span>label<span class="o">}]</span>
</span></span><span class="line"><span class="cl">/<span class="o">{</span>application<span class="o">}</span>-<span class="o">{</span>profile<span class="o">}</span>.yml
</span></span><span class="line"><span class="cl">/<span class="o">{</span>label<span class="o">}</span>/<span class="o">{</span>application<span class="o">}</span>-<span class="o">{</span>profile<span class="o">}</span>.yml
</span></span><span class="line"><span class="cl">/<span class="o">{</span>application<span class="o">}</span>-<span class="o">{</span>profile<span class="o">}</span>.properties
</span></span><span class="line"><span class="cl">/<span class="o">{</span>label<span class="o">}</span>/<span class="o">{</span>application<span class="o">}</span>-<span class="o">{</span>profile<span class="o">}</span>.properties
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>label</code>, which refers to a branch of code, such as <code>master</code>, <code>feature-1</code>, etc.</li>
<li><code>application</code>, the name of the application, which will be used later when the client reads it.</li>
<li><code>profile</code>, generally used to specify the environment, such as <code>prod</code>, <code>dev</code>, <code>uat</code>, etc.</li>
</ul>
<p>So, we can use the following <code>URL</code> to get the configuration information we just added.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">http://localhost:8888/application/default
</span></span><span class="line"><span class="cl">http://localhost:8888/application/default/master
</span></span><span class="line"><span class="cl">http://localhost:8888/master/application.properties
</span></span><span class="line"><span class="cl">http://localhost:8888/application-default.properties
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use curl to access configuration information.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8888/application/default/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;application&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;default&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;8796f39b35095f6e9b7176457eb03dd6d62b1783&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/git-repo/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;www.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.age&#34;</span>:<span class="s2">&#34;18&#34;</span>,<span class="s2">&#34;pkslow.email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}}]}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The last address <code>/{label}/{application}-{profile}.properties</code> returns the result in a different format, returning the profile contents directly.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8888/application-default.properties
</span></span><span class="line"><span class="cl">pkslow.age: <span class="m">18</span>
</span></span><span class="line"><span class="cl">pkslow.email: admin@pkslow.com
</span></span><span class="line"><span class="cl">pkslow.webSite: www.pkslow.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>If we first create a branch <code>release-20200809</code> and change <code>age</code> to <code>9</code>, it will look like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8888/application/default/release-20200809
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;application&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;default&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;release-20200809&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;7e27e6972ed31ee1a51e9277a2f5c0a628cec67a&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/git-repo/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;www.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.age&#34;</span>:<span class="s2">&#34;9&#34;</span>,<span class="s2">&#34;pkslow.email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}}]}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can see that the corresponding <code>pkslow.age</code> has changed to <code>9</code>, but access to <code>/application/default/master</code> is still <code>18</code>, and the branches do not affect each other.</p>
<h3 id="24-remote-repositories">2.4 Remote repositories</h3>
<p>The local repository is for simple demonstration purposes only. In real projects, you can create a new repository in <code>GitHub</code> as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/springcloud-community/image-bucket/2022/04/06/b2ac7612b2e24681affca2b5575db458.png" alt="Github"></p>
<p>A <code>private</code> repository was created to check if the authentication behind it is correct.</p>
<p>The address of the reconfigured repository is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">spring.cloud.config.server.git.uri=https://github.com/pkslow/pkslow-config
</span></span><span class="line"><span class="cl">spring.cloud.config.server.git.username=admin@pkslow.com
</span></span><span class="line"><span class="cl">spring.cloud.config.server.git.password=***
</span></span><span class="line"><span class="cl">spring.cloud.config.server.git.default-label=master
</span></span><span class="line"><span class="cl">spring.cloud.config.server.git.search-paths=demo
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create a <code>demo</code> directory to hold the configuration, so <code>search-paths</code> is configured as <code>demo</code>. Finish the configuration and restart the server, and you can read the configuration of the remote repository normally.</p>
<h3 id="25-multiple-code-configuration-repositories">2.5 Multiple code configuration repositories</h3>
<p>There are times when our configuration may not be in just one repository, but in the code repository of the respective client, for example, we have the following three services.</p>
<ul>
<li>(1) Service discovery: discovery, code repository pkslow-discovery-service</li>
<li>(2) API gateway: gateway, code repository pkslow-gateway-service</li>
<li>(3) Order service: order, code repository pkslow-order-service</li>
</ul>
<p>Their respective configuration files are placed in their own code base, that requires the configuration of multiple code bases. We also configure one more default configuration library pkslow-default, if it does not match, the configuration of the default code base will be selected. The specific configuration is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8888</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">application</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">config-server</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cloud</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">git</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/pkslow/multiple-repos/pkslow-default</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">repos</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">pkslow-discovery-service</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="l">pkslow-discovery-*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">cloneOnStart</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/pkslow/multiple-repos/pkslow-discovery-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">search-paths</span><span class="p">:</span><span class="w"> </span><span class="l">config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">pkslow-gateway-service</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="l">pkslow-gateway-*/dev</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">cloneOnStart</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/pkslow/multiple-repos/pkslow-gateway-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">search-paths</span><span class="p">:</span><span class="w"> </span><span class="l">config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">pkslow-order-service</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="l">pkslow-order-*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">cloneOnStart</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="l">/Users/pkslow/IdeaProjects/pkslow-order-service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">search-paths</span><span class="p">:</span><span class="w"> </span><span class="l">config</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>You can define the directory <code>search-paths</code> where the profiles are placed, and the default is the root directory if not configured.</p>
<p>The configuration rule for <code>pattern</code> here is <code>{application}/{profile}</code>, which supports the regular symbol <code>*</code>. Note that only one result is matched, if both are satisfied, only the first matching repository is taken.</p>
<p>After starting, let&rsquo;s see the configuration result.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 默认profile和label，正确匹配</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-order-service/default/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-order-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;default&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;9d86e5d11974f0a0e7c20cd53d8f062755193e70&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-order-service/config/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;www.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.app.name&#34;</span>:<span class="s2">&#34;order-service&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 正确匹配，但不存在的Label，配置库没有对应代码分支，404</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-order-service/default/release
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;timestamp&#34;</span>:<span class="s2">&#34;2020-08-13T06:58:38.722+0000&#34;</span>,<span class="s2">&#34;status&#34;</span>:404,<span class="s2">&#34;error&#34;</span>:<span class="s2">&#34;Not Found&#34;</span>,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;No such label: release&#34;</span>,<span class="s2">&#34;path&#34;</span>:<span class="s2">&#34;/pkslow-order-service/default/release&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># profile为dev，正确匹配</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-order-service/dev/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-order-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;dev&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;9d86e5d11974f0a0e7c20cd53d8f062755193e70&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-order-service/config/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;www.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.app.name&#34;</span>:<span class="s2">&#34;order-service&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 对于gateway只能匹配profile=dev，无法匹配，读取默认配置</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-gateway-service/default/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-gateway-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;default&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;8358f2b4701fac21a0c7776bc46cec6d9442c549&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-base/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.birthDate&#34;</span>:<span class="s2">&#34;2020-08-10&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 对于gateway只能匹配profile=dev，正确匹配</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-gateway-service/dev/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-gateway-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;dev&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;1a4e26849b237dc2592ca0d391daaa1a879747d2&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-gateway-service/config/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;www.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.app.name&#34;</span>:<span class="s2">&#34;gateway-service&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 不存在的服务名，无法匹配，读取默认配置</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/unknown-service/dev/master
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;unknown-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;dev&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;master&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;8358f2b4701fac21a0c7776bc46cec6d9442c549&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-base/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.birthDate&#34;</span>:<span class="s2">&#34;2020-08-10&#34;</span><span class="o">}}]}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-client-side-use-of-configuration">3 Client-side use of configuration</h2>
<p>After the previous examples we have learned how the server side can get the configuration from the code base, but it is always important to enable the client side to get the corresponding configuration and produce the effect. Let&rsquo;s demonstrate this.</p>
<h3 id="31-project-preparation">3.1 Project preparation</h3>
<p>Build the simplest <code>Springboot Web</code> project with <code>Spring Cloud Config</code> support and add the following dependencies.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-config<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add the configuration file: <code>bootstrap.properties</code> (although we want to read the configuration from the server, some configurations must still be added at the client, such as the server address), with the following content.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server.port=8080
</span></span><span class="line"><span class="cl">spring.application.name=pkslow-gateway-service
</span></span><span class="line"><span class="cl">spring.cloud.config.uri=http://localhost:8888
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here we configure the port of the client, the address of the server and the name of the client application, the name is very critical and will be explained later.</p>
<p>Add <code>Controller</code> to expose the <code>API</code> to display the read configuration content.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RestController</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PkslowController</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${pkslow.age}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${pkslow.email}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">email</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${pkslow.webSite}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">String</span> <span class="n">webSite</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/pkslow&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">getConfig</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">,</span> <span class="n">age</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;email&#34;</span><span class="o">,</span> <span class="n">email</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;webSite&#34;</span><span class="o">,</span> <span class="n">webSite</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then start the client and access the Controller. The result is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;default.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;9&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>These configuration contents are not on the client side, indicating that the configuration information can be obtained from the server side.</p>
<h3 id="32-how-the-client-matches">3.2 How the client matches</h3>
<p>The client has gotten the configuration information, is it correct? And how does the client match it? Actually, as mentioned in the previous section, there are three main pieces of information to match.</p>
<ul>
<li><code>label</code> refers to the code branch.</li>
<li><code>application</code> is the name of the application.</li>
<li><code>profile</code> is generally used to specify the environment.</li>
</ul>
<p>The client name in the previous example is <code>pkslow-gateway-service</code>; <code>label</code> is not specified and defaults to <code>master</code>; <code>profile</code> is not specified and defaults to <code>default</code>.</p>
<p>Our server-side matching rule is <code>pattern: pkslow-gateway-*/dev</code>, so we can match the name, but not the <code>profile</code>, so the default repository configuration is read.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ cat pkslow-base/application.properties 
</span></span><span class="line"><span class="cl">pkslow.webSite<span class="o">=</span>default.pkslow.com
</span></span><span class="line"><span class="cl">pkslow.age<span class="o">=</span><span class="m">9</span>
</span></span><span class="line"><span class="cl">pkslow.email<span class="o">=</span>admin@pkslow.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>Modify the client configuration by configuring <code>profile</code> to <code>dev</code> as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server.port=8080
</span></span><span class="line"><span class="cl">spring.application.name=pkslow-gateway-service
</span></span><span class="line"><span class="cl">spring.profiles.active=dev
</span></span><span class="line"><span class="cl">spring.cloud.config.uri=http://localhost:8888
</span></span></code></pre></td></tr></table>
</div>
</div><p>Get the client configuration again as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;gateway-master.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;9&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can see that the configuration of the <code>pkslow-gateway-service</code> repository has been read.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ cat pkslow-gateway-service/config/application.properties 
</span></span><span class="line"><span class="cl">pkslow.webSite<span class="o">=</span>gateway-master.pkslow.com
</span></span><span class="line"><span class="cl">pkslow.age<span class="o">=</span><span class="m">9</span>
</span></span><span class="line"><span class="cl">pkslow.email<span class="o">=</span>admin@pkslow.com
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create a new code branch <code>release</code> in the <code>pkslow-gateway-service</code> repository and add the configuration, then modify the client configuration as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server.port=8080
</span></span><span class="line"><span class="cl">spring.application.name=pkslow-gateway-service
</span></span><span class="line"><span class="cl">spring.profiles.active=dev
</span></span><span class="line"><span class="cl">spring.cloud.config.label=release
</span></span><span class="line"><span class="cl">spring.cloud.config.uri=http://localhost:8888
</span></span></code></pre></td></tr></table>
</div>
</div><p>After rebooting and accessing again, the configuration of the new branch was read correctly.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;9&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-client-configuration-takes-effect-instantly">3.3 Client configuration takes effect instantly</h3>
<p>When we modify the configuration, the result of accessing again is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ git commit -a -m <span class="s2">&#34;update&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>release 0e489fe<span class="o">]</span> update
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">2</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">2</span> deletions<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-gateway-service/dev/release
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-gateway-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;dev&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;release&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;0e489fec5de73b1a6d11befa3f65e44836979e23&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/pkslow/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-gateway-service/config/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.age&#34;</span>:<span class="s2">&#34;10&#34;</span>,<span class="s2">&#34;pkslow.email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;9&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>It turns out that the server side has taken effect, but the client side has not. This is because in this mode the client will only read the configuration at startup to make it effective. If we want the client to take effect as well, we need to use the <code>/refresh</code> endpoint provided by the <code>Springboot actuator</code> to do so.</p>
<p>Start by adding the <code>actuator</code> dependency.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-actuator<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Activate and open the <code>/refresh</code> endpoint. Add the following configuration.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">management.endpoints.web.exposure.include=refresh
</span></span></code></pre></td></tr></table>
</div>
</div><p>Specify the scope of the refresh by adding the annotation <code>@RefreshScope</code> to the <code>Controller</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RefreshScope</span>
</span></span><span class="line"><span class="cl"><span class="nd">@RestController</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PkslowController</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">//xxx
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Restart the application. The operation and results are as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 修改配置并提交</span>
</span></span><span class="line"><span class="cl">$ git commit -a -m <span class="s2">&#34;update age to 18&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>release fc863bd<span class="o">]</span> update age to <span class="m">18</span>
</span></span><span class="line"><span class="cl"> <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>, <span class="m">1</span> deletion<span class="o">(</span>-<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 服务端配置生效</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8888/pkslow-gateway-service/dev/release
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;pkslow-gateway-service&#34;</span>,<span class="s2">&#34;profiles&#34;</span>:<span class="o">[</span><span class="s2">&#34;dev&#34;</span><span class="o">]</span>,<span class="s2">&#34;label&#34;</span>:<span class="s2">&#34;release&#34;</span>,<span class="s2">&#34;version&#34;</span>:<span class="s2">&#34;fc863bd8849fa1dc5eaf2ce0a97afb485f81c2f0&#34;</span>,<span class="s2">&#34;state&#34;</span>:null,<span class="s2">&#34;propertySources&#34;</span>:<span class="o">[{</span><span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;/Users/larry/IdeaProjects/pkslow-modules/config-server/multiple-repos/pkslow-gateway-service/config/application.properties&#34;</span>,<span class="s2">&#34;source&#34;</span>:<span class="o">{</span><span class="s2">&#34;pkslow.webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;pkslow.age&#34;</span>:<span class="s2">&#34;18&#34;</span>,<span class="s2">&#34;pkslow.email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}}]}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 客户端没有生效</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;10&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 发送POST请求到客户端/refresh</span>
</span></span><span class="line"><span class="cl">$ curl -X POST http://localhost:8080/actuator/refresh
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="s2">&#34;config.client.version&#34;</span>,<span class="s2">&#34;pkslow.age&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 客户端已经生效</span>
</span></span><span class="line"><span class="cl">$ curl http://localhost:8080/pkslow
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;webSite&#34;</span>:<span class="s2">&#34;gateway-release.pkslow.com&#34;</span>,<span class="s2">&#34;age&#34;</span>:<span class="s2">&#34;18&#34;</span>,<span class="s2">&#34;email&#34;</span>:<span class="s2">&#34;admin@pkslow.com&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34-automatic-configuration-update">3.4 Automatic configuration update</h3>
<p>Every time you commit a configuration, you need to manually send a <code>POST</code> request to the client to update the configuration, which is obviously not friendly enough. GitHub provides a <code>webhook</code> function that sends a request to a specified <code>URL</code> after an event is triggered, so that automatic updates can be made.</p>
<p>Automatic updates via the <code>webhook</code> function are one-to-one, and cannot be implemented directly this way if there are many clients (which is usually the case). There are two options.</p>
<ol>
<li>Implement a port to accept requests from <code>Git</code> and distribute them to the servers. This is not recommended because it&rsquo;s a bit tricky.</li>
<li>Introduce <code>Spring Cloud Bus</code> to refresh multiple clients. This requires the introduction of <code>MQ</code>, such as <code>kafka</code> or <code>RabbitMQ</code>.</li>
</ol>
<h3 id="35-services-discovery">3.5 Services Discovery</h3>
<p>In a microservices architecture, if both the server and the client are configured to register with service discovery (e.g. <code>eureka</code>), the client does not need to configure the address of the server anymore and will get the identification from the service discovery center. This is similar to <code>Springboot Admin</code> in the case of <code>eureka</code>.</p>
<p>There is nothing special about the code, it just registers both the server and the client to <code>eureka</code>.</p>
<h2 id="4-summary">4 Summary</h2>
<p>This article shows how to use <code>Spring Cloud Config</code> step by step with examples, mainly to understand the interaction process and matching rules, everything else is code details, just refer to the official documentation.</p>
<blockquote>
<p>Reference <a href="https://cloud.tencent.com/developer/news/680840">https://cloud.tencent.com/developer/news/680840</a></p>
</blockquote>

    </div>

    
    


    
    

    <footer class="post-footer">
      <div class="post-tags">
          <a href="https://www.springcloud.io/tags/spring-cloud-config/">spring-cloud-config</a>
          
        </div>

      
      <nav class="post-nav">
        
        
          <a class="next" href="/post/2022-04/spring-cloud-dataflow-shell/">
            <span class="next-text nav-default">Getting Started with Data Flow Shell</span>
            <span class="prev-text nav-mobile">Next</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="https://twitter.com/springcloud_io" rel="me noopener" class="iconfont"
      title="twitter"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1264 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M1229.8616 18.043658c0 0-117.852626 63.135335-164.151872 67.344358-105.225559-164.151872-505.082682-92.598492-437.738325 223.078185C278.622548 312.675223 89.216542 47.506814 89.216542 47.506814s-117.852626 189.406006 75.762402 345.139833C127.097743 396.85567 55.544363 371.601535 55.544363 371.601535S26.081207 535.753407 253.368414 615.724832c-21.045112 29.463156-113.643603 8.418045-113.643603 8.418045s25.254134 143.10676 231.496229 180.987961c-143.10676 130.479693-387.230056 92.598492-370.393967 105.225559 206.242095 189.406006 1119.599946 231.496229 1128.01799-643.98042C1179.353331 249.539887 1263.533778 123.269217 1263.533778 123.269217s-130.479693 37.881201-138.897738 33.672179C1225.652577 98.015083 1229.8616 18.043658 1229.8616 18.043658"></path>
</svg>

    </a>


<a href="https://www.springcloud.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2021 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.dee43230127a73d039a734510fa896c89c3c7ce0cf0be0c7a7433f8fd69b76dc.js" integrity="sha256-3uQyMBJ6c9A5pzRRD6iWyJw8fODPC&#43;DHp0M/j9abdtw=" crossorigin="anonymous"></script>



  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML' async></script>









  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











  <script>
    $("#openSearch, #openSearchMobile").click(function(){
      $(".modal-dialog").addClass("visible");
    });

    $("#closeSearch").click(function(){
      $(".modal-dialog").removeClass("visible");
    });

    $(document).click(function(event) {
    
      if (!$(event.target).closest(".modal-content, #openSearch, #openSearchMobile").length) {
        $("body").find(".modal-dialog").removeClass("visible");
      }
    });
  </script>





</body>
</html>
